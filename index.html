<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel da Roxy – Segunda Tela</title>

    <!-- Arquivo de estilos -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <h1>Painel da Roxy</h1>
            <p class="subtitle">Fogo que cria, vento que guia</p>
        </header>

        <main class="dashboard-grid">
            <!-- Relógio -->
            <section class="card" id="clock-card">
                <h2>Relógio</h2>

                <div class="clock-main">
                    <span id="clock-hours">--:--</span>
                    <span id="clock-seconds">--</span>
                </div>

                <div class="clock-line"></div>

                <div class="clock-meta">
                    <span id="clock-weekday">---</span>
                    <span class="clock-dot">•</span>
                    <span id="clock-tagline">Fogo que cria, vento que guia</span>
                </div>
            </section>


            <!-- Calendário -->
            <section class="card" id="calendar-card">
                <h2>Calendário</h2>
                <div class="calendar-header">
                    <button id="calendar-prev" type="button" aria-label="Mês anterior">‹</button>
                    <div class="calendar-title">
                        <span id="calendar-month">Mês</span>
                        <span id="calendar-year">Ano</span>
                    </div>
                    <button id="calendar-next" type="button" aria-label="Próximo mês">›</button>
                </div>

                <div class="calendar-grid" id="calendar-grid">
                    <!-- Dias do calendário serão gerados via JavaScript -->
                </div>
            </section>

            <!-- Fase da Lua -->
            <section class="card" id="moon-card">
                <h2>Fase da Lua</h2>
                <div class="moon-content" id="moon-content">
                    <a class="moon-link"
                       target="_blank"
                       href="https://moonphase.guide/">
                        <img 
                            class="moon-image"
                            src="https://moonphase.guide/module/MUC9hUlRpZVFSY0taQnhZK0xzUlVHdVZveFRaTXFWVDZaUmlOMU80aEM4Q3FaV2JaMlB1N0w3YnE3NFgxZFpuRG5xZHJBVjVSZFN0RmZoSWxTSDJISU9Fbk1TQkgrTEptRjAvWHNEcDB1VUk9.png" 
                            alt="Fase atual da lua" />
                    </a>

                    <p class="notes-hint">
                        Fase atual da lua – imagem de moonphase.guide.
                    </p>
                </div>
            </section>
        </main>
    </div>

    <!-- JavaScript embutido -->
    <script>
    // Função para adicionar zero à esquerda
    function pad(num) {
        return (num < 10 ? "0" : "") + num;
    }

  var lastMinute = null;

// Atualizar relógio em modo cyber-místico com animação de minuto
function updateClock() {
    var now = new Date();

    var hours = pad(now.getHours());
    var minutes = pad(now.getMinutes());
    var seconds = pad(now.getSeconds());

    var weekdays = [
        "Domingo",
        "Segunda-feira",
        "Terça-feira",
        "Quarta-feira",
        "Quinta-feira",
        "Sexta-feira",
        "Sábado"
    ];

    var clockHoursEl = document.getElementById("clock-hours");
    var clockSecondsEl = document.getElementById("clock-seconds");
    var clockWeekdayEl = document.getElementById("clock-weekday");
    var clockMainEl = document.querySelector(".clock-main");

    if (clockHoursEl) {
        clockHoursEl.textContent = hours + ":" + minutes;
    }

    if (clockSecondsEl) {
        clockSecondsEl.textContent = seconds;
    }

    if (clockWeekdayEl) {
        clockWeekdayEl.textContent = weekdays[now.getDay()];
    }

    // Animação quando muda o minuto
    if (clockMainEl) {
        if (lastMinute === null) {
            lastMinute = minutes;
        } else if (lastMinute !== minutes) {
            lastMinute = minutes;
            clockMainEl.classList.remove("clock-pulse");
            // força reflow pra reiniciar animação
            void clockMainEl.offsetWidth;
            clockMainEl.classList.add("clock-pulse");
        }
    }
}

var currentCalendarYear = null;
var currentCalendarMonthIndex = null; // 0–11
var todayRef = new Date();

// Gerar calendário para ano/mês específicos
function generateCalendar(year, monthIndex) {
    var calendarMonth = document.getElementById("calendar-month");
    var calendarYear = document.getElementById("calendar-year");
    var calendarGrid = document.getElementById("calendar-grid");

    if (!calendarGrid || !calendarMonth || !calendarYear) return;

    if (typeof year === "undefined" || typeof monthIndex === "undefined") {
        var now = new Date();
        year = now.getFullYear();
        monthIndex = now.getMonth();
    }

    currentCalendarYear = year;
    currentCalendarMonthIndex = monthIndex;

    var monthNames = [
        "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
        "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
    ];

    var weekDayNames = ["D", "S", "T", "Q", "Q", "S", "S"]; // Domingo a Sábado

    calendarMonth.textContent = monthNames[monthIndex];
    calendarYear.textContent = year;

    calendarGrid.innerHTML = "";

    // Cabeçalho: nomes dos dias da semana
    for (var i = 0; i < weekDayNames.length; i++) {
        var nameCell = document.createElement("div");
        nameCell.className = "calendar-day-name";
        nameCell.textContent = weekDayNames[i];
        calendarGrid.appendChild(nameCell);
    }

    var firstDay = new Date(year, monthIndex, 1);
    var startingWeekDay = firstDay.getDay();
    var daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

    // Dias vazios antes do primeiro dia do mês
    for (var empty = 0; empty < startingWeekDay; empty++) {
        var emptyCell = document.createElement("div");
        emptyCell.className = "calendar-day empty";
        emptyCell.textContent = "";
        calendarGrid.appendChild(emptyCell);
    }

    var todayYear = todayRef.getFullYear();
    var todayMonth = todayRef.getMonth();
    var todayDate = todayRef.getDate();

    // Dias do mês
    for (var dayNum = 1; dayNum <= daysInMonth; dayNum++) {
        var dayCell = document.createElement("div");
        dayCell.className = "calendar-day";
        dayCell.textContent = dayNum;

        // Marca hoje apenas se for o mês/ano atual
        if (year === todayYear && monthIndex === todayMonth && dayNum === todayDate) {
            dayCell.className += " today";
        }

        calendarGrid.appendChild(dayCell);
    }
}

// Controles de navegação do calendário
function setupCalendarNavigation() {
    var prevBtn = document.getElementById("calendar-prev");
    var nextBtn = document.getElementById("calendar-next");

    if (!prevBtn || !nextBtn) return;

    prevBtn.addEventListener("click", function () {
        if (currentCalendarYear === null || currentCalendarMonthIndex === null) {
            var now = new Date();
            generateCalendar(now.getFullYear(), now.getMonth());
            return;
        }

        var year = currentCalendarYear;
        var month = currentCalendarMonthIndex - 1;
        if (month < 0) {
            month = 11;
            year--;
        }
        generateCalendar(year, month);
    });

    nextBtn.addEventListener("click", function () {
        if (currentCalendarYear === null || currentCalendarMonthIndex === null) {
            var now = new Date();
            generateCalendar(now.getFullYear(), now.getMonth());
            return;
        }

        var year = currentCalendarYear;
        var month = currentCalendarMonthIndex + 1;
        if (month > 11) {
            month = 0;
            year++;
        }
        generateCalendar(year, month);
    });
}

// Dias do mês
var now = new Date();
var today = now.getDate();

for (var dayNum = 1; dayNum <= daysInMonth; dayNum++) {
    var dayCell = document.createElement("div");
    dayCell.className = "calendar-day";
    dayCell.textContent = dayNum;

    // Marca como "hoje" apenas no mês real
    if (
        year === todayRef.getFullYear() &&
        monthIndex === todayRef.getMonth() &&
        dayNum === today
    ) {
        dayCell.className += " today";
    }

    calendarGrid.appendChild(dayCell);
}

    // Inicialização geral
document.addEventListener("DOMContentLoaded", function () {
    updateClock();
    setInterval(updateClock, 1000);

    // Calendário começa no mês atual
    var now = new Date();
    generateCalendar(now.getFullYear(), now.getMonth());
    setupCalendarNavigation();
});
        
    </script>
</body>
</html>
