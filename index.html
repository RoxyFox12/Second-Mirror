<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel da Roxy ‚Äì Segunda Tela</title>

    <!-- Arquivo de estilos -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <h1>Painel da Roxy</h1>
            <p class="subtitle">Fogo que cria, vento que guia</p>
        </header>

        <main class="dashboard-grid">
            <!-- Rel√≥gio -->
            <section class="card" id="clock-card">
                <h2>Rel√≥gio</h2>

                <div class="clock-main">
                    <span id="clock-hours">--:--</span>
                    <span id="clock-seconds">--</span>
                </div>

                <div class="clock-line"></div>
                
                <div class="clock-pulse-wrapper">
                    <span class="clock-pulse-dot"></span>
                </div>

                <div class="clock-meta">
                    <span id="clock-weekday">---</span>
                    <span class="clock-dot">‚Ä¢</span>
                    <span id="clock-tagline">Fogo que cria, vento que guia</span>
                </div>
            </section>


            <!-- Calend√°rio -->
            <section class="card" id="calendar-card">
                <h2>Calend√°rio</h2>
                <div class="calendar-header">
                    <button id="calendar-prev" type="button" aria-label="M√™s anterior">‚Äπ</button>
                    <div class="calendar-title">
                        <span id="calendar-month">M√™s</span>
                        <span id="calendar-year">Ano</span>
                    </div>
                    <button id="calendar-next" type="button" aria-label="Pr√≥ximo m√™s">‚Ä∫</button>
                </div>

                <div class="calendar-grid" id="calendar-grid">
                    <!-- Dias do calend√°rio ser√£o gerados via JavaScript -->
                </div>
            </section>




            <!-- Fase da Lua -->
            <section class="card" id="moon-card">
                <h2>Fase da Lua</h2>
                <div class="moon-content" id="moon-content">
                    <a class="moon-link"
                       target="_blank"
                       href="https://moonphase.guide/">
                        <img 
                            class="moon-image"
                            src="https://moonphase.guide/module/MUC9hUlRpZVFSY0taQnhZK0xzUlVHdVZveFRaTXFWVDZaUmlOMU80aEM4Q3FaV2JaMlB1N0w3YnE3NFgxZFpuRG5xZHJBVjVSZFN0RmZoSWxTSDJISU9Fbk1TQkgrTEptRjAvWHNEcDB1VUk9.png" 
                            alt="Fase atual da lua" />
                    </a>

                    <p class="notes-hint">
                        Fase atual da lua ‚Äì imagem de moonphase.guide.
                    </p>
                </div>
            </section>


            
    <!-- Clima -->
<section class="card" id="weather-card">
    <h2>Clima</h2>

    <div class="weather-main">
        <div class="weather-icon-temp">
            <span id="weather-icon">--</span>
            <span id="weather-temp">--¬∞C</span>
        </div>

        <div class="weather-extra">
            <span class="weather-label">Sensa√ß√£o:</span>
            <span id="weather-apparent">--¬∞C</span>
        </div>

        <p class="notes-hint" id="weather-status">
            Carregando clima‚Ä¶
        </p>
    </div>
</section>

            <!-- Eventos do Dia -->
<section class="card" id="dayinfo-card">
    <h2>Eventos do Dia</h2>

    <div class="dayinfo-row">
        <span class="dayinfo-label">Hoje</span>
        <span id="dayinfo-today">--</span>
    </div>

    <div class="dayinfo-row">
        <span class="dayinfo-label">Semana do m√™s</span>
        <span id="dayinfo-weekofmonth">--</span>
    </div>

    <div class="dayinfo-row">
        <span class="dayinfo-label">Restam no m√™s</span>
        <span id="dayinfo-daysremaining">--</span>
    </div>

    <div class="dayinfo-row">
        <span class="dayinfo-label">Dia do ano</span>
        <span id="dayinfo-dayofyear">-- / --</span>
    </div>
</section>
            
<!-- Energia do Dia -->
<section class="card" id="solar-card">
    <h2>Energia do Dia</h2>

    <div class="solar-main">
        <div class="solar-row">
            <span class="solar-label">Nascer do sol</span>
            <span id="solar-sunrise">--:--</span>
        </div>
        <div class="solar-row">
            <span class="solar-label">P√¥r do sol</span>
            <span id="solar-sunset">--:--</span>
        </div>
        <div class="solar-row">
            <span class="solar-label">Luz restante</span>
            <span id="solar-remaining">--h --min</span>
        </div>

        <p class="notes-hint" id="solar-status">
            Carregando dados solares‚Ä¶
        </p>
    </div>
</section>

            
        </main>
        
            <footer class="dashboard-footer">
                <span>‚∏ª Criado por Roxy Fox ‚Ä¢ Fogo &amp; Vento ‚∏ª</span>
            </footer>
            
    </div>





    <!-- JavaScript embutido -->
    <script>
    // Fun√ß√£o para adicionar zero √† esquerda
    function pad(num) {
        return (num < 10 ? "0" : "") + num;
    }

  var lastMinute = null;

// Atualizar rel√≥gio em modo cyber-m√≠stico com anima√ß√£o de minuto e hora espelhada
function updateClock() {
    var now = new Date();

    var hoursNum = now.getHours();
    var minutesNum = now.getMinutes();
    var secondsNum = now.getSeconds();

    var hours = pad(hoursNum);
    var minutes = pad(minutesNum);
    var seconds = pad(secondsNum);

    var weekdays = [
        "Domingo",
        "Segunda-feira",
        "Ter√ßa-feira",
        "Quarta-feira",
        "Quinta-feira",
        "Sexta-feira",
        "S√°bado"
    ];

    var clockHoursEl   = document.getElementById("clock-hours");
    var clockSecondsEl = document.getElementById("clock-seconds");
    var clockWeekdayEl = document.getElementById("clock-weekday");
    var clockMainEl    = document.querySelector(".clock-main");
    var clockCardEl    = document.getElementById("clock-card");

    if (clockHoursEl) {
        clockHoursEl.textContent = hours + ":" + minutes;
    }

    if (clockSecondsEl) {
        clockSecondsEl.textContent = seconds;
    }

    if (clockWeekdayEl) {
        clockWeekdayEl.textContent = weekdays[now.getDay()];
    }

    // Anima√ß√£o quando muda o minuto (pulse suave)
    if (clockMainEl) {
        if (lastMinute === null) {
            lastMinute = minutes;
        } else if (lastMinute !== minutes) {
            lastMinute = minutes;
            clockMainEl.classList.remove("clock-pulse");
            void clockMainEl.offsetWidth; // for√ßa reflow
            clockMainEl.classList.add("clock-pulse");
        }
    }

    // Efeito especial quando horas e minutos s√£o iguais (11:11, 13:13, etc.)
    var isMirrorTime = (hours === minutes); // "11" === "11"

    if (clockCardEl) {
        if (isMirrorTime) {
            clockCardEl.classList.add("mirror-time");
        } else {
            clockCardEl.classList.remove("mirror-time");
        }
    }
}

var currentCalendarYear = null;
var currentCalendarMonthIndex = null; // 0‚Äì11
var todayRef = new Date();

// Gerar calend√°rio para ano/m√™s espec√≠ficos
function generateCalendar(year, monthIndex) {
    var calendarMonth = document.getElementById("calendar-month");
    var calendarYear = document.getElementById("calendar-year");
    var calendarGrid = document.getElementById("calendar-grid");

    if (!calendarGrid || !calendarMonth || !calendarYear) return;

    if (typeof year === "undefined" || typeof monthIndex === "undefined") {
        var now = new Date();
        year = now.getFullYear();
        monthIndex = now.getMonth();
    }

    currentCalendarYear = year;
    currentCalendarMonthIndex = monthIndex;

    var monthNames = [
        "Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho",
        "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
    ];

    var weekDayNames = ["D", "S", "T", "Q", "Q", "S", "S"]; // Domingo a S√°bado

    calendarMonth.textContent = monthNames[monthIndex];
    calendarYear.textContent = year;

    calendarGrid.innerHTML = "";

    // Cabe√ßalho: nomes dos dias da semana
    for (var i = 0; i < weekDayNames.length; i++) {
        var nameCell = document.createElement("div");
        nameCell.className = "calendar-day-name";
        nameCell.textContent = weekDayNames[i];
        calendarGrid.appendChild(nameCell);
    }

    var firstDay = new Date(year, monthIndex, 1);
    var startingWeekDay = firstDay.getDay();
    var daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

    // Dias vazios antes do primeiro dia do m√™s
    for (var empty = 0; empty < startingWeekDay; empty++) {
        var emptyCell = document.createElement("div");
        emptyCell.className = "calendar-day empty";
        emptyCell.textContent = "";
        calendarGrid.appendChild(emptyCell);
    }

    var todayYear = todayRef.getFullYear();
    var todayMonth = todayRef.getMonth();
    var todayDate = todayRef.getDate();

    // Dias do m√™s
    for (var dayNum = 1; dayNum <= daysInMonth; dayNum++) {
        var dayCell = document.createElement("div");
        dayCell.className = "calendar-day";
        dayCell.textContent = dayNum;

        // Marca hoje apenas se for o m√™s/ano atual
        if (year === todayYear && monthIndex === todayMonth && dayNum === todayDate) {
            dayCell.className += " today";
        }

        calendarGrid.appendChild(dayCell);
    }
}

// Controles de navega√ß√£o do calend√°rio
function setupCalendarNavigation() {
    var prevBtn = document.getElementById("calendar-prev");
    var nextBtn = document.getElementById("calendar-next");

    if (!prevBtn || !nextBtn) return;

    prevBtn.addEventListener("click", function () {
        if (currentCalendarYear === null || currentCalendarMonthIndex === null) {
            var now = new Date();
            generateCalendar(now.getFullYear(), now.getMonth());
            return;
        }

        var year = currentCalendarYear;
        var month = currentCalendarMonthIndex - 1;
        if (month < 0) {
            month = 11;
            year--;
        }
        generateCalendar(year, month);
    });

    nextBtn.addEventListener("click", function () {
        if (currentCalendarYear === null || currentCalendarMonthIndex === null) {
            var now = new Date();
            generateCalendar(now.getFullYear(), now.getMonth());
            return;
        }

        var year = currentCalendarYear;
        var month = currentCalendarMonthIndex + 1;
        if (month > 11) {
            month = 0;
            year++;
        }
        generateCalendar(year, month);
    });
}

// -----------------------------
// Eventos do dia (semana, resto do m√™s, dia do ano)
// -----------------------------
function updateDayInfo() {
    var now = new Date();

    var weekdayNamesLong = [
        "Domingo",
        "Segunda-feira",
        "Ter√ßa-feira",
        "Quarta-feira",
        "Quinta-feira",
        "Sexta-feira",
        "S√°bado"
    ];

    var monthNames = [
        "Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho",
        "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
    ];

    var day = now.getDate();
    var monthIndex = now.getMonth();
    var year = now.getFullYear();

    var todayStr = weekdayNamesLong[now.getDay()] + ", " +
                   pad(day) + " de " + monthNames[monthIndex];

    var firstOfMonth = new Date(year, monthIndex, 1);
    var firstWeekday = firstOfMonth.getDay(); // 0‚Äì6

    var weekOfMonth = Math.ceil((day + firstWeekday) / 7);

    var lastOfMonth = new Date(year, monthIndex + 1, 0);
    var daysInMonth = lastOfMonth.getDate();
    var daysRemaining = daysInMonth - day;

    var startOfYear = new Date(year, 0, 1);
    var diffMs = now - startOfYear;
    var dayOfYear = Math.floor(diffMs / (1000 * 60 * 60 * 24)) + 1;

    var dayinfoTodayEl        = document.getElementById("dayinfo-today");
    var dayinfoWeekOfMonthEl  = document.getElementById("dayinfo-weekofmonth");
    var dayinfoDaysRemainingEl= document.getElementById("dayinfo-daysremaining");
    var dayinfoDayOfYearEl    = document.getElementById("dayinfo-dayofyear");

    if (dayinfoTodayEl) {
        dayinfoTodayEl.textContent = todayStr;
    }
    if (dayinfoWeekOfMonthEl) {
        dayinfoWeekOfMonthEl.textContent = "Semana " + weekOfMonth;
    }
    if (dayinfoDaysRemainingEl) {
        dayinfoDaysRemainingEl.textContent = daysRemaining + " dia" + (daysRemaining === 1 ? "" : "s");
    }
    if (dayinfoDayOfYearEl) {
        dayinfoDayOfYearEl.textContent = dayOfYear + " / 365";
    }
}

// -----------------------------
// Energia do dia (nascer / p√¥r do sol)
// usando API sunrise-sunset.org (sem chave)
// -----------------------------
function initSolarCard() {
    var sunriseEl   = document.getElementById("solar-sunrise");
    var sunsetEl    = document.getElementById("solar-sunset");
    var remainingEl = document.getElementById("solar-remaining");
    var statusEl    = document.getElementById("solar-status");
    var solarCardEl = document.getElementById("solar-card");

    if (!sunriseEl || !sunsetEl || !remainingEl || !statusEl) return;

    var lat = -23.55;
    var lng = -46.63;

    var url = "https://api.sunrise-sunset.org/json?lat=" + lat +
              "&lng=" + lng + "&formatted=0";

    fetch(url)
        .then(function (res) { return res.json(); })
        .then(function (data) {
            if (!data || data.status !== "OK") {
                statusEl.textContent = "N√£o foi poss√≠vel carregar os dados solares.";
                return;
            }

            var results = data.results;

            var sunriseDate = new Date(results.sunrise);
            var sunsetDate  = new Date(results.sunset);
            var now = new Date();

            var sunriseStr = pad(sunriseDate.getHours()) + ":" +
                             pad(sunriseDate.getMinutes());
            var sunsetStr  = pad(sunsetDate.getHours()) + ":" +
                             pad(sunsetDate.getMinutes());

            sunriseEl.textContent = sunriseStr;
            sunsetEl.textContent  = sunsetStr;

            var remainingText = "";
            if (now < sunriseDate) {
                var diffMs = sunriseDate - now;
                var diffMin = Math.round(diffMs / 60000);
                var hrs = Math.floor(diffMin / 60);
                var mins = diffMin % 60;
                remainingText = "Dia ainda n√£o come√ßou (" + hrs + "h " + pad(mins) + "min)";
                if (solarCardEl) {
                    solarCardEl.classList.remove("solar-day");
                    solarCardEl.classList.add("solar-night");
                }
            } else if (now >= sunriseDate && now <= sunsetDate) {
                var diffMsDay = sunsetDate - now;
                var diffMinDay = Math.round(diffMsDay / 60000);
                var hrsDay = Math.floor(diffMinDay / 60);
                var minsDay = diffMinDay % 60;
                remainingText = hrsDay + "h " + pad(minsDay) + "min";
                if (solarCardEl) {
                    solarCardEl.classList.remove("solar-night");
                    solarCardEl.classList.add("solar-day");
                }
            } else {
                remainingText = "Dia encerrado ‚Äì agora √© noite.";
                if (solarCardEl) {
                    solarCardEl.classList.remove("solar-day");
                    solarCardEl.classList.add("solar-night");
                }
            }

            remainingEl.textContent = remainingText;
            statusEl.textContent = "Dados solares carregados.";
        })
        .catch(function () {
            statusEl.textContent = "Falha ao obter dados solares.";
        });
}


// -----------------------------
// Clima minimalista (Open-Meteo)
// -----------------------------
function initWeatherCard() {
    var iconEl     = document.getElementById("weather-icon");
    var tempEl     = document.getElementById("weather-temp");
    var appEl      = document.getElementById("weather-apparent");
    var statusEl   = document.getElementById("weather-status");
    var weatherCardEl = document.getElementById("weather-card");

    if (!iconEl || !tempEl || !appEl || !statusEl) return;

    var lat = -23.55;
    var lng = -46.63;

    var url = "https://api.open-meteo.com/v1/forecast?latitude=" + lat +
              "&longitude=" + lng +
              "&current_weather=true&timezone=auto";

    fetch(url)
        .then(function (res) { return res.json(); })
        .then(function (data) {
            if (!data || !data.current_weather) {
                statusEl.textContent = "N√£o foi poss√≠vel carregar o clima.";
                return;
            }

            var cw = data.current_weather;
            var temperature = cw.temperature;
            var weatherCode = cw.weathercode;

            tempEl.textContent = Math.round(temperature) + "¬∞C";
            appEl.textContent  = Math.round(temperature) + "¬∞C";

            var icon = "‚õÖ";
            var weatherClass = "weather-cloudy";

            if (weatherCode === 0) {
                icon = "‚òÄÔ∏è";
                weatherClass = "weather-clear";
            } else if (weatherCode === 1 || weatherCode === 2) {
                icon = "üå§Ô∏è";
                weatherClass = "weather-clear";
            } else if (weatherCode === 3) {
                icon = "‚òÅÔ∏è";
                weatherClass = "weather-cloudy";
            } else if (weatherCode === 45 || weatherCode === 48) {
                icon = "üå´Ô∏è";
                weatherClass = "weather-cloudy";
            } else if (weatherCode >= 51 && weatherCode <= 67) {
                icon = "üåßÔ∏è";
                weatherClass = "weather-rainy";
            } else if (weatherCode >= 71 && weatherCode <= 77) {
                icon = "üå®Ô∏è";
                weatherClass = "weather-rainy";
            } else if (weatherCode >= 80 && weatherCode <= 82) {
                icon = "üåßÔ∏è";
                weatherClass = "weather-rainy";
            } else if (weatherCode >= 95) {
                icon = "‚õàÔ∏è";
                weatherClass = "weather-storm";
            }

            iconEl.textContent = icon;

            // remove classes antigas
            document.body.classList.remove("weather-clear", "weather-cloudy", "weather-rainy", "weather-storm");
            if (weatherCardEl) {
                weatherCardEl.classList.remove("weather-clear", "weather-cloudy", "weather-rainy", "weather-storm");
            }

            // adiciona classe atual
            document.body.classList.add(weatherClass);
            if (weatherCardEl) {
                weatherCardEl.classList.add(weatherClass);
            }

            statusEl.textContent = "Dados de clima carregados.";
        })
        .catch(function () {
            statusEl.textContent = "Falha ao obter o clima.";
        });
}


        
    // Inicializa√ß√£o geral
document.addEventListener("DOMContentLoaded", function () {
    updateClock();
    setInterval(updateClock, 1000);

    var now = new Date();
    generateCalendar(now.getFullYear(), now.getMonth());
    setupCalendarNavigation();

    updateDayInfo();
    initSolarCard();
    initWeatherCard();
});

    // Calend√°rio come√ßa no m√™s atual
    var now = new Date();
    generateCalendar(now.getFullYear(), now.getMonth());
    setupCalendarNavigation();
        
    </script>
</body>
</html>
