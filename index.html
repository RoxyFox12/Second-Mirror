<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel da Roxy – Segunda Tela</title>

    <!-- Arquivo de estilos -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard">
        <header class="dashboard-header">
            <h1>Painel da Roxy</h1>
            <p class="subtitle">Fogo que cria, vento que guia</p>
        </header>

        <main class="dashboard-grid">
            <!-- Relógio -->
            <section class="card" id="clock-card">
                <h2>Relógio</h2>
                <div class="clock-time" id="clock-time">--:--:--</div>
                <div class="clock-date" id="clock-date">--/--/----</div>
            </section>

            <!-- Calendário -->
            <section class="card" id="calendar-card">
                <h2>Calendário</h2>
                <div class="calendar-header">
                    <span id="calendar-month">Mês</span>
                    <span id="calendar-year">Ano</span>
                </div>
                <div class="calendar-grid" id="calendar-grid">
                    <!-- Dias do calendário serão gerados via JavaScript -->
                </div>
            </section>

            <!-- Bloco de notas -->
            <section class="card" id="notes-card">
                <h2>Bloco de Notas</h2>
                <textarea id="notes-area" placeholder="Escreva aqui suas anotações rápidas, lembretes, mantras do dia, etc."></textarea>

                <div class="notes-actions">
                    <button id="save-notes-btn" type="button">Salvar notas</button>
                    <p id="notes-status" class="notes-status">Nenhuma alteração salva ainda.</p>
                </div>

                <p class="notes-hint">
                    As notas são salvas localmente neste navegador (localStorage). 
                    Só ficam disponíveis neste computador e neste navegador.
                </p>
            </section>

            <!-- Fase da Lua -->
            <section class="card" id="moon-card">
                <h2>Fase da Lua</h2>
                <div class="moon-content" id="moon-content">
                    <p>Espaço reservado para o widget de fase lunar.</p>
                    <p class="notes-hint">Cole aqui o código do widget do site que você preferir.</p>
                </div>
            </section>
        </main>
    </div>

    <!-- JavaScript embutido -->
    <script>
    // Função para adicionar zero à esquerda
    function pad(num) {
        return (num < 10 ? "0" : "") + num;
    }

    // Atualizar relógio
    function updateClock() {
        var now = new Date();

        var hours = pad(now.getHours());
        var minutes = pad(now.getMinutes());
        var seconds = pad(now.getSeconds());

        var day = pad(now.getDate());
        var month = pad(now.getMonth() + 1);
        var year = now.getFullYear();

        var clockTime = document.getElementById("clock-time");
        var clockDate = document.getElementById("clock-date");

        if (clockTime && clockDate) {
            clockTime.textContent = hours + ":" + minutes + ":" + seconds;
            clockDate.textContent = day + "/" + month + "/" + year;
        }
    }

    // Gerar calendário do mês atual
    function generateCalendar() {
        var now = new Date();
        var year = now.getFullYear();
        var monthIndex = now.getMonth(); // 0–11

        var calendarMonth = document.getElementById("calendar-month");
        var calendarYear = document.getElementById("calendar-year");
        var calendarGrid = document.getElementById("calendar-grid");

        if (!calendarGrid || !calendarMonth || !calendarYear) return;

        var monthNames = [
            "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
            "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
        ];

        var weekDayNames = ["D", "S", "T", "Q", "Q", "S", "S"]; // Domingo a Sábado

        calendarMonth.textContent = monthNames[monthIndex];
        calendarYear.textContent = year;

        // Limpar grid
        calendarGrid.innerHTML = "";

        // Cabeçalho: nomes dos dias da semana
        for (var i = 0; i < weekDayNames.length; i++) {
            var nameCell = document.createElement("div");
            nameCell.className = "calendar-day-name";
            nameCell.textContent = weekDayNames[i];
            calendarGrid.appendChild(nameCell);
        }

        // Primeiro dia do mês
        var firstDay = new Date(year, monthIndex, 1);
        var startingWeekDay = firstDay.getDay(); // 0 (domingo) - 6 (sábado)

        // Quantos dias tem o mês
        var daysInMonth = new Date(year, monthIndex + 1, 0).getDate();

        // Dias vazios antes do primeiro dia do mês
        for (var empty = 0; empty < startingWeekDay; empty++) {
            var emptyCell = document.createElement("div");
            emptyCell.className = "calendar-day empty";
            emptyCell.textContent = "";
            calendarGrid.appendChild(emptyCell);
        }

        // Dias do mês
        var today = now.getDate();

        for (var dayNum = 1; dayNum <= daysInMonth; dayNum++) {
            var dayCell = document.createElement("div");
            dayCell.className = "calendar-day";
            dayCell.textContent = dayNum;

            if (dayNum === today) {
                dayCell.className += " today";
            }

            calendarGrid.appendChild(dayCell);
        }
    }

// Bloco de notas com localStorage + botão de salvar
function initNotes() {
    var notesArea = document.getElementById("notes-area");
    var saveButton = document.getElementById("save-notes-btn");
    var statusText = document.getElementById("notes-status");

    if (!notesArea || !saveButton || !statusText) return;

    var STORAGE_KEY = "roxy_dashboard_notes";

    // Carregar notas salvas
    var savedNotes = null;
    try {
        savedNotes = localStorage.getItem(STORAGE_KEY);
    } catch (e) {
        // Se der erro com localStorage, só ignora
    }

    if (savedNotes !== null) {
        notesArea.value = savedNotes;
        statusText.textContent = "Notas carregadas deste navegador.";
    } else {
        statusText.textContent = "Nenhuma nota salva ainda.";
    }

    // Ao clicar no botão, salvar
    saveButton.addEventListener("click", function () {
        try {
            localStorage.setItem(STORAGE_KEY, notesArea.value);
            var now = new Date();
            var timeStr = now.toLocaleTimeString("pt-BR", {
                hour: "2-digit",
                minute: "2-digit"
            });
            statusText.textContent = "Notas salvas localmente às " + timeStr + ".";
        } catch (e) {
            statusText.textContent = "Não foi possível salvar as notas (erro de armazenamento).";
        }
    });
}


        // Salvar sempre que digitar
        notesArea.addEventListener("input", function () {
            try {
                localStorage.setItem(STORAGE_KEY, notesArea.value);
            } catch (e) {
                // Ignora se não puder salvar
            }
        });
    }

    // Inicialização geral
    document.addEventListener("DOMContentLoaded", function () {
        updateClock();
        setInterval(updateClock, 1000);

        generateCalendar();

        initNotes();
    });
    </script>
</body>
</html>
